diff -Naur orig.zlib-1.1.4/configure zlib-1.1.4/configure
--- orig.zlib-1.1.4/configure	1998-07-08 20:19:35.000000000 +0200
+++ zlib-1.1.4/configure	2007-05-22 02:25:19.000000000 +0200
@@ -126,18 +126,18 @@
 if test $shared -eq 1; then
   echo Checking for shared library support...
   # we must test in two steps (cc then ld), required at least on SunOS 4.x
-  if test "`($CC -c $SFLAGS $test.c) 2>&1`" = "" &&
-     test "`($LDSHARED -o $test$shared_ext $test.o) 2>&1`" = ""; then
+#  if test "`($CC -c $SFLAGS $test.c) 2>&1`" = "" &&
+#     test "`($LDSHARED -o $test$shared_ext $test.o) 2>&1`" = ""; then
     CFLAGS="$SFLAGS"
     LIBS="$SHAREDLIB.$VER"
     echo Building shared library $SHAREDLIB.$VER with $CC.
-  elif test -z "$old_cc" -a -z "$old_cflags"; then
-    echo No shared library suppport.
-    shared=0;
-  else
-    echo 'No shared library suppport; try without defining CC and CFLAGS'
-    shared=0;
-  fi
+#  elif test -z "$old_cc" -a -z "$old_cflags"; then
+#    echo No shared library suppport.
+#    shared=0;
+#  else
+#    echo 'No shared library suppport; try without defining CC and CFLAGS'
+#    shared=0;
+#  fi
 fi
 if test $shared -eq 0; then
   LDSHARED="$CC"
